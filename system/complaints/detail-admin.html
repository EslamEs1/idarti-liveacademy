<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تفاصيل الشكوى - IDARTI Live Academy</title>
    
    <!-- Bootstrap RTL CSS -->
    <link rel="stylesheet" href="../../assets/css/bootstrap.rtl.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Custom System CSS -->
    <link rel="stylesheet" href="../../assets/css/custom_system.css">
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <div class="content-wrapper">
            <!-- Navbar -->
            <div id="navbar-container"></div>

            <!-- Page Content -->
            <div class="container-fluid px-4 py-4">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-4">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/system/dashboard/admin.html">لوحة التحكم</a></li>
                        <li class="breadcrumb-item"><a href="/system/complaints/list-admin.html">الشكاوى</a></li>
                        <li class="breadcrumb-item active">تفاصيل الشكوى #C-1044</li>
                    </ol>
                </nav>

                <!-- Header Card -->
                <div class="card mb-4">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="d-flex align-items-start mb-3">
                                    <div class="avatar-sm d-flex align-items-center justify-content-center rounded-circle me-3" class="size-50 avatar-gradient-info">
                                        <i class="bi bi-person-fill text-white fs-4"></i>
                                    </div>
                                    <div>
                                        <h5 class="mb-1 fw-bold">محمد خالد</h5>
                                        <p class="text-muted mb-0 small">
                                            <i class="bi bi-envelope me-2"></i>mohammed@example.com
                                            <i class="bi bi-phone me-2 ms-3"></i>+966 50 123 4567
                                        </p>
                                    </div>
                                </div>
                                <h5 class="fw-bold mb-2">تأخر في رفع المواد التعليمية</h5>
                                <p class="text-muted mb-2">
                                    <i class="bi bi-journal-richtext me-2"></i>الدورة: الرياضيات المتقدمة
                                </p>
                                <p class="text-muted mb-0">
                                    <i class="bi bi-calendar me-2"></i>تاريخ الإرسال: 5 مارس 2025، 10:30 صباحاً
                                </p>
                            </div>
                            <div class="col-md-4 text-end">
                                <h6 class="text-muted mb-2">رقم الشكوى</h6>
                                <h4 class="fw-bold mb-3">#C-1044</h4>
                                <span class="badge badge-warning fs-6 me-2">شكوى</span>
                                <span class="badge bg-warning fs-6">عالية</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="d-flex gap-2 mb-4 flex-wrap">
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#replyModal">
                        <i class="bi bi-reply me-2"></i>رد على الشكوى
                    </button>
                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#resolveModal">
                        <i class="bi bi-check-circle me-2"></i>تحديد كـ تم الحل
                    </button>
                    <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#assignModal">
                        <i class="bi bi-person-plus me-2"></i>تعيين مسؤول
                    </button>
                    <button class="btn btn-light" data-bs-toggle="modal" data-bs-target="#escalateModal">
                        <i class="bi bi-arrow-up-circle me-2"></i>تصعيد
                    </button>
                    <a href="/system/complaints/print-detail.html?id=1045" class="btn btn-light">
                        <i class="bi bi-printer me-2"></i>طباعة
                    </a>
                    <button class="btn btn-outline-danger ms-auto" data-bs-toggle="modal" data-bs-target="#closeModal">
                        <i class="bi bi-x-circle me-2"></i>إغلاق
                    </button>
                    <a href="/system/complaints/list-admin.html" class="btn btn-light">
                        <i class="bi bi-arrow-right me-2"></i>رجوع
                    </a>
                </div>

                <div class="row g-4">
                    <!-- Main Content -->
                    <div class="col-lg-8">
                        <!-- Complaint Content -->
                        <div class="card mb-4">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 fw-bold">محتوى الشكوى</h6>
                            </div>
                            <div class="card-body">
                                <p class="mb-0">
                                    السلام عليكم، أود أن أبلغكم بأن هناك تأخر كبير في رفع المواد التعليمية للأسبوع الماضي. 
                                    لقد مر أكثر من 5 أيام على انتهاء الجلسة ولم يتم رفع الملفات المرفقة التي وعد بها المعلم. 
                                    هذا التأخير يؤثر على قدرتي على متابعة الدراسة ومراجعة المحتوى. أرجو التدخل لحل هذه المشكلة في أقرب وقت ممكن.
                                </p>
                            </div>
                        </div>

                        <!-- Replies/Timeline -->
                        <div class="card">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 fw-bold">الردود والمتابعة</h6>
                            </div>
                            <div class="card-body">
                                <div class="timeline">
                                    <div class="timeline-item">
                                        <div class="timeline-marker bg-primary"></div>
                                        <div class="timeline-content">
                                            <div class="d-flex justify-content-between">
                                                <h6 class="mb-1 fw-semibold">رد من الإدارة</h6>
                                                <small class="text-muted">منذ ساعة</small>
                                            </div>
                                            <p class="mb-2 small">
                                                شكراً لك على تواصلك. تم التنبيه على المعلم بضرورة رفع المواد خلال 24 ساعة.
                                            </p>
                                            <span class="badge badge-primary small">الإدارة</span>
                                        </div>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-marker bg-warning"></div>
                                        <div class="timeline-content">
                                            <div class="d-flex justify-content-between">
                                                <h6 class="mb-1 fw-semibold">تم تعيين المسؤول</h6>
                                                <small class="text-muted">منذ 3 ساعات</small>
                                            </div>
                                            <p class="mb-0 small">تم تعيين د. أحمد محمد للرد على الشكوى</p>
                                        </div>
                                    </div>

                                    <div class="timeline-item">
                                        <div class="timeline-marker bg-info"></div>
                                        <div class="timeline-content">
                                            <div class="d-flex justify-content-between">
                                                <h6 class="mb-1 fw-semibold">تم إنشاء الشكوى</h6>
                                                <small class="text-muted">5 مارس 2025</small>
                                            </div>
                                            <p class="mb-0 small">الحالة: جديدة | الأولوية: عالية</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Reply Form -->
                                <div class="mt-4 pt-4 border-top">
                                    <h6 class="fw-bold mb-3">إضافة رد</h6>
                                    <form>
                                        <div class="mb-3">
                                            <textarea class="form-control" rows="4" placeholder="اكتب ردك هنا..."></textarea>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="notifyUser" checked>
                                                <label class="form-check-label" for="notifyUser">
                                                    إرسال إشعار للمستخدم
                                                </label>
                                            </div>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="bi bi-send me-2"></i>إرسال الرد
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sidebar -->
                    <div class="col-lg-4">
                        <!-- Status Card -->
                        <div class="card mb-4">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 fw-bold">معلومات الحالة</h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label class="form-label small text-muted">الحالة</label>
                                    <select class="form-select">
                                        <option>جديدة</option>
                                        <option selected>قيد المعالجة</option>
                                        <option>تم الحل</option>
                                        <option>مغلقة</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label small text-muted">الأولوية</label>
                                    <select class="form-select">
                                        <option>منخفضة</option>
                                        <option>متوسطة</option>
                                        <option selected>عالية</option>
                                        <option>عاجلة</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label small text-muted">المسؤول</label>
                                    <select class="form-select">
                                        <option>لم يتم التعيين</option>
                                        <option selected>د. أحمد محمد</option>
                                        <option>أ. سارة أحمد</option>
                                        <option>الإدارة</option>
                                    </select>
                                </div>
                                <button class="btn btn-primary w-100" id="saveChangesBtn">
                                    <i class="bi bi-save me-2"></i>حفظ التغييرات
                                </button>
                            </div>
                        </div>

                        <!-- Statistics -->
                        <div class="card mb-4">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 fw-bold">الإحصائيات</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-flex justify-content-between mb-3 pb-3 border-bottom">
                                    <span class="text-muted">وقت الاستجابة:</span>
                                    <span class="fw-semibold">12 ساعة</span>
                                </div>
                                <div class="d-flex justify-content-between mb-3 pb-3 border-bottom">
                                    <span class="text-muted">عدد الردود:</span>
                                    <span class="fw-semibold">2</span>
                                </div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-muted">آخر تحديث:</span>
                                    <span class="fw-semibold">منذ ساعة</span>
                                </div>
                            </div>
                        </div>

                        <!-- Related Links -->
                        <div class="card">
                            <div class="card-header bg-white">
                                <h6 class="mb-0 fw-bold">روابط ذات صلة</h6>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <a href="/system/users/detail-student.html?id=1" class="btn btn-light text-start">
                                        <i class="bi bi-person me-2"></i>ملف الطالب
                                    </a>
                                    <a href="/system/courses/detail-admin.html?id=1" class="btn btn-light text-start">
                                        <i class="bi bi-journal-richtext me-2"></i>صفحة الدورة
                                    </a>
                                    <a href="/system/enrollments/detail-admin.html?id=1024" class="btn btn-light text-start">
                                        <i class="bi bi-person-check me-2"></i>تفاصيل الالتحاق
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="mt-auto py-3 text-center text-muted small">
                <p class="mb-0">&copy; 2025 IDARTI Live Academy. جميع الحقوق محفوظة.</p>
            </footer>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="../../assets/js/popper.min.js"></script>
    <script src="../../assets/js/bootstrap.min.js"></script>
    <script src="../../assets/js/custom.js"></script>
    
    <!-- Load Partials -->
    <script>
        fetch('../partials/sidebar_admin.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('sidebar-container').innerHTML = data;
            });

        fetch('../partials/navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-container').innerHTML = data;
            });
    </script>
    
    <!-- Reply Modal -->
    <div class="modal fade" id="replyModal" tabindex="-1" aria-labelledby="replyModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="replyModalLabel">الرد على الشكوى</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">نص الرد</label>
                        <textarea class="form-control" rows="5" placeholder="اكتب ردك هنا..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">الحالة بعد الرد</label>
                        <select class="form-select">
                            <option>قيد المعالجة</option>
                            <option>تم الحل</option>
                            <option>مغلقة</option>
                            <option>بانتظار رد العميل</option>
                        </select>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyCustomer" checked>
                        <label class="form-check-label" for="notifyCustomer">
                            إرسال إشعار للعميل
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-success">إرسال الرد</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resolve Modal -->
    <div class="modal fade" id="resolveModal" tabindex="-1" aria-labelledby="resolveModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="resolveModalLabel">حل الشكوى</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-success">
                        <i class="bi bi-check-circle me-2"></i>
                        أنت على وشك تحديد هذه الشكوى كـ "تم الحل".
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ملاحظات الحل</label>
                        <textarea class="form-control" rows="4" placeholder="اكتب تفاصيل الحل هنا..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">الإجراءات المتخذة</label>
                        <select class="form-select">
                            <option>تم تقديم حل</option>
                            <option>تم تقديم تعويض</option>
                            <option>تم تصحيح الخطأ</option>
                            <option>أخرى</option>
                        </select>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyCustomerResolve" checked>
                        <label class="form-check-label" for="notifyCustomerResolve">
                            إرسال إشعار للعميل بحل الشكوى
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-success">تأكيد الحل</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Assign Modal -->
    <div class="modal fade" id="assignModal" tabindex="-1" aria-labelledby="assignModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="assignModalLabel">تعيين مسؤول للشكوى</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">اختر المسؤول</label>
                        <select class="form-select">
                            <option>أحمد محمد - قسم خدمة العملاء</option>
                            <option>سارة أحمد - قسم الجودة</option>
                            <option>محمد علي - قسم الدعم الفني</option>
                            <option>فاطمة حسن - قسم الشكاوى</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">أولوية المهمة</label>
                        <select class="form-select">
                            <option>منخفضة</option>
                            <option selected>متوسطة</option>
                            <option>عالية</option>
                            <option>عاجلة</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ملاحظات</label>
                        <textarea class="form-control" rows="3" placeholder="أضف ملاحظات للمسؤول..."></textarea>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyAssignee" checked>
                        <label class="form-check-label" for="notifyAssignee">
                            إرسال إشعار للمسؤول المعين
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary">تعيين</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Escalate Modal -->
    <div class="modal fade" id="escalateModal" tabindex="-1" aria-labelledby="escalateModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="escalateModalLabel">تصعيد الشكوى</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">تصعيد إلى</label>
                        <select class="form-select">
                            <option>مدير خدمة العملاء</option>
                            <option>مدير الجودة</option>
                            <option>المدير التنفيذي</option>
                            <option>قسم الشؤون القانونية</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">سبب التصعيد</label>
                        <select class="form-select">
                            <option>شكوى معقدة</option>
                            <option>تأخر في الحل</option>
                            <option>عميل مهم</option>
                            <option>تكرار المشكلة</option>
                            <option>سبب آخر</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ملاحظات التصعيد</label>
                        <textarea class="form-control" rows="3" placeholder="اكتب ملاحظات حول تصعيد الشكوى..."></textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">أولوية التصعيد</label>
                        <select class="form-select">
                            <option>عادية</option>
                            <option selected>عالية</option>
                            <option>عاجلة</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-warning">تأكيد التصعيد</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Close Modal -->
    <div class="modal fade" id="closeModal" tabindex="-1" aria-labelledby="closeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="closeModalLabel">إغلاق الشكوى</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <i class="bi bi-exclamation-triangle me-2"></i>
                        أنت على وشك إغلاق هذه الشكوى. هل أنت متأكد؟
                    </div>
                    <div class="mb-3">
                        <label class="form-label">سبب الإغلاق</label>
                        <select class="form-select">
                            <option>تم حلها</option>
                            <option>لم يتم التواصل مع العميل</option>
                            <option>شكوى مكررة</option>
                            <option>غير قابلة للحل</option>
                            <option>سبب آخر</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">ملاحظات الإغلاق</label>
                        <textarea class="form-control" rows="3" placeholder="اكتب ملاحظات حول إغلاق الشكوى..."></textarea>
                    </div>
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyCustomerClose" checked>
                        <label class="form-check-label" for="notifyCustomerClose">
                            إرسال إشعار للعميل بإغلاق الشكوى
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-danger">تأكيد الإغلاق</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Save changes button functionality
        document.getElementById('saveChangesBtn').addEventListener('click', function() {
            alert('تم حفظ التغييرات بنجاح');
        });
    </script>
</body>
</html>
